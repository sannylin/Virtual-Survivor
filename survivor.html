
<html>
  <head>
  <meta name="author" content="Sanny Lin & Eric Rosen for ARTS445 Spring 2014, Net Art with Ben Grosser at University of Illinois at Urbana-Champaign.">
    <script src='https://cdn.firebase.com/v0/firebase.js'></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script> 
    <title>Survivor</title>
  <style>
        #container { 
          margin:0 auto;
        }
 
        body { 
          font-family:Helvetica;
          font-weight:bold;
          -webkit-user-select:none;
          text-align:center;
        }
 
        .hovertext { color:red; }
        .activatedtext { color:purple; }
        .offtext { color:black; }
 
    </style>
 
 
  </head>
 
  <body> 
    <script>
 
        var j = jQuery.noConflict();
 
        var fb = new Firebase("https://internet-survivor.firebaseio.com/player");
        var counter = new Firebase("https://internet-survivor.firebaseio.com/Counter");
        
        //global variables
        var you;
        var first = true;
        var other;
 
        j(document).ready(function() {

            fb.once('value',function(dataSnapshot) {
              you = dataSnapshot.val();

              if(you){
                fb.set(false);
              }
              else{
                fb.set(true);
              }

              console.log("you is " + you);

            }); 
        });
 
        function changeval(value) {
            counter.transaction(function(current) {
                return current + value;
            });
        }
        
        fb.on('value',function(dataSnapshot) {
            //ignore initial variable
            if(first){                
              first = false;
              return;
            }

            //get updated variable
            other = dataSnapshot.val();     

            console.log("other is " + other);

            if ( window.you === other ){
              window.location.replace("http://illinois.edu");
              changeval(1);
            };
        });
  
  counter.on('value',function(dataSnapshot) {
             var data = dataSnapshot.val();
            j('#count').text(data);
        });
 
    </script>
    
     <div id="container" style="padding-top: 10%;">
       <div id="count" style="font-size: 10em;"></div>
       <div id="plus" style="font-size: 5em;">People have been outcast.</div>
    </div>
 
  </body>
</html>
